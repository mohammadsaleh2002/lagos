{% macro field_label(text) %}<label class="block text-xs font-semibold text-[#8888aa] mb-1.5 uppercase tracking-wide">{{ text }}</label>{% endmacro %}
{% macro text_input(name, value='', placeholder='', readonly=false) %}
<input type="text" name="{{ name }}" value="{{ value }}" placeholder="{{ placeholder }}"
       {% if readonly %}readonly{% endif %}
       class="w-full bg-[#1a1a35] border border-[#2a2a4a] rounded-lg px-4 py-2.5 text-[#e0e0e0] text-sm transition-all {% if readonly %}opacity-60 cursor-not-allowed{% endif %}">
{% endmacro %}

<!-- Section header helper -->
{% macro section(icon, title) %}
<div class="flex items-center gap-2 mt-7 mb-4 pb-2.5 border-b border-[#2a2a4a]">
    <i class="bi bi-{{ icon }} text-[#6c4fbf]"></i>
    <h3 class="text-sm font-semibold text-white">{{ title }}</h3>
</div>
{% endmacro %}

<!-- Business Info -->
{{ section('building', t('business_info')) }}
<div class="grid grid-cols-12 gap-3 mb-3">
    <div class="col-span-12 md:col-span-6">
        {{ field_label(t('project_name') + ' *') }}
        <input type="text" name="name" value="{{ project.name if project else '' }}" required
               class="w-full bg-[#1a1a35] border border-[#2a2a4a] rounded-lg px-4 py-2.5 text-[#e0e0e0] text-sm transition-all">
    </div>
    <div class="col-span-12 md:col-span-4">
        {{ field_label(t('project_key') + ' *') }}
        <input type="text" name="db_key" value="{{ project.db_key if project else '' }}" required placeholder="unique_key"
               {% if is_edit %}readonly{% endif %}
               class="w-full bg-[#1a1a35] border border-[#2a2a4a] rounded-lg px-4 py-2.5 text-[#e0e0e0] text-sm transition-all {% if is_edit %}opacity-60 cursor-not-allowed{% endif %}">
    </div>
    <div class="col-span-12 md:col-span-2">
        {{ field_label(t('language')) }}
        <input type="text" name="lang" value="{{ project.lang if project else 'fa' }}"
               class="w-full bg-[#1a1a35] border border-[#2a2a4a] rounded-lg px-4 py-2.5 text-[#e0e0e0] text-sm transition-all">
    </div>
</div>
<div class="grid grid-cols-2 gap-3 mb-3">
    <div>
        {{ field_label(t('company_name')) }}
        <input type="text" name="company_name" value="{{ project.company_name if project else '' }}"
               class="w-full bg-[#1a1a35] border border-[#2a2a4a] rounded-lg px-4 py-2.5 text-[#e0e0e0] text-sm transition-all">
    </div>
    <div>
        {{ field_label(t('business_field')) }}
        <input type="text" name="business_field" value="{{ project.business_field if project else '' }}"
               class="w-full bg-[#1a1a35] border border-[#2a2a4a] rounded-lg px-4 py-2.5 text-[#e0e0e0] text-sm transition-all">
    </div>
</div>
<div class="mb-3">
    {{ field_label(t('services_products')) }}
    <textarea name="services_products" rows="2"
              class="w-full bg-[#1a1a35] border border-[#2a2a4a] rounded-lg px-4 py-2.5 text-[#e0e0e0] text-sm resize-y transition-all">{{ project.services_products if project else '' }}</textarea>
</div>
<div class="mb-3">
    {{ field_label(t('about_company')) }}
    <textarea name="about_company" rows="2"
              class="w-full bg-[#1a1a35] border border-[#2a2a4a] rounded-lg px-4 py-2.5 text-[#e0e0e0] text-sm resize-y transition-all">{{ project.about_company if project else '' }}</textarea>
</div>

<!-- Contact -->
{{ section('telephone', t('contact_info')) }}
<div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-3">
    <div>
        {{ field_label(t('phone')) }}
        <input type="text" name="phone" value="{{ project.phone if project else '' }}"
               class="w-full bg-[#1a1a35] border border-[#2a2a4a] rounded-lg px-4 py-2.5 text-[#e0e0e0] text-sm transition-all">
    </div>
    <div>
        {{ field_label(t('mobile')) }}
        <input type="text" name="mobile_phone" value="{{ project.mobile_phone if project else '' }}"
               class="w-full bg-[#1a1a35] border border-[#2a2a4a] rounded-lg px-4 py-2.5 text-[#e0e0e0] text-sm transition-all">
    </div>
    <div>
        {{ field_label(t('email')) }}
        <input type="email" name="email" value="{{ project.email if project else '' }}"
               class="w-full bg-[#1a1a35] border border-[#2a2a4a] rounded-lg px-4 py-2.5 text-[#e0e0e0] text-sm transition-all">
    </div>
    <div>
        {{ field_label(t('address')) }}
        <input type="text" name="address" value="{{ project.address if project else '' }}"
               class="w-full bg-[#1a1a35] border border-[#2a2a4a] rounded-lg px-4 py-2.5 text-[#e0e0e0] text-sm transition-all">
    </div>
</div>

<!-- SEO -->
{{ section('search', t('seo_content')) }}
<div class="mb-3">
    {{ field_label(t('seed_keywords')) }}
    <input type="text" name="keyword" value="{{ project.keyword if project else '' }}" placeholder="keyword1-keyword2-keyword3"
           class="w-full bg-[#1a1a35] border border-[#2a2a4a] rounded-lg px-4 py-2.5 text-[#e0e0e0] text-sm transition-all">
</div>
<div class="grid grid-cols-3 gap-3 mb-3">
    {% for i in [1,2,3] %}
    <div>
        {{ field_label(t('bullet_template') + ' ' + i|string) }}
        <textarea name="bullet{{ i }}" rows="2"
                  class="w-full bg-[#1a1a35] border border-[#2a2a4a] rounded-lg px-4 py-2.5 text-[#e0e0e0] text-sm resize-y transition-all">{{ project['bullet' ~ i] if project and project['bullet' ~ i] else '' }}</textarea>
    </div>
    {% endfor %}
</div>

<!-- WordPress -->
{{ section('wordpress', t('wordpress_connection')) }}
<div class="grid grid-cols-12 gap-3 mb-3">
    <div class="col-span-12 md:col-span-4">
        {{ field_label(t('wp_url')) }}
        <input type="url" name="wp_url" placeholder="https://yoursite.com"
               value="{{ project.wordpress.url if project and project.wordpress else '' }}"
               class="w-full bg-[#1a1a35] border border-[#2a2a4a] rounded-lg px-4 py-2.5 text-[#e0e0e0] text-sm transition-all">
    </div>
    <div class="col-span-12 md:col-span-3">
        {{ field_label(t('wp_username')) }}
        <input type="text" name="wp_username"
               value="{{ project.wordpress.username if project and project.wordpress else '' }}"
               class="w-full bg-[#1a1a35] border border-[#2a2a4a] rounded-lg px-4 py-2.5 text-[#e0e0e0] text-sm transition-all">
    </div>
    <div class="col-span-12 md:col-span-3">
        {{ field_label(t('wp_app_password')) }}
        <input type="password" name="wp_app_password"
               value="{{ project.wordpress.app_password if project and project.wordpress else '' }}"
               class="w-full bg-[#1a1a35] border border-[#2a2a4a] rounded-lg px-4 py-2.5 text-[#e0e0e0] text-sm transition-all">
    </div>
    <div class="col-span-12 md:col-span-2">
        {{ field_label(t('category_id')) }}
        <input type="number" name="wp_category_id"
               value="{{ project.wordpress.category_id if project and project.wordpress else 0 }}"
               class="w-full bg-[#1a1a35] border border-[#2a2a4a] rounded-lg px-4 py-2.5 text-[#e0e0e0] text-sm transition-all">
    </div>
</div>

<!-- Telegram -->
{{ section('telegram', t('telegram_optional')) }}
<div class="grid grid-cols-2 gap-3 mb-3">
    <div>
        {{ field_label(t('bot_token')) }}
        <input type="text" name="tg_bot_token"
               value="{{ project.telegram.bot_token if project and project.telegram else '' }}"
               class="w-full bg-[#1a1a35] border border-[#2a2a4a] rounded-lg px-4 py-2.5 text-[#e0e0e0] text-sm transition-all">
    </div>
    <div>
        {{ field_label(t('chat_id')) }}
        <input type="text" name="tg_chat_id"
               value="{{ project.telegram.chat_id if project and project.telegram else '' }}"
               class="w-full bg-[#1a1a35] border border-[#2a2a4a] rounded-lg px-4 py-2.5 text-[#e0e0e0] text-sm transition-all">
    </div>
</div>

<!-- Schedule -->
{{ section('clock', t('schedule')) }}
<div class="grid grid-cols-2 gap-3 mb-3">
    <div class="bg-[#1a1a35] border border-[#2a2a4a] rounded-lg p-4">
        <label class="flex items-center gap-2 cursor-pointer mb-3">
            <input type="checkbox" name="creation_enabled" id="creation_enabled" class="w-4 h-4 accent-[#6c4fbf]"
                   {% if project and project.schedule and project.schedule.creation_enabled %}checked{% endif %}>
            <span class="text-sm text-white font-medium">{{ t('auto_content_creation') }}</span>
        </label>
        {{ field_label(t('interval_minutes')) }}
        <input type="number" name="creation_interval"
               value="{{ project.schedule.creation_interval_minutes if project and project.schedule else 60 }}"
               class="w-full bg-[#12122a] border border-[#2a2a4a] rounded-lg px-4 py-2 text-[#e0e0e0] text-sm transition-all">
    </div>
    <div class="bg-[#1a1a35] border border-[#2a2a4a] rounded-lg p-4">
        <label class="flex items-center gap-2 cursor-pointer mb-3">
            <input type="checkbox" name="publish_enabled" id="publish_enabled" class="w-4 h-4 accent-[#6c4fbf]"
                   {% if project and project.schedule and project.schedule.publish_enabled %}checked{% endif %}>
            <span class="text-sm text-white font-medium">{{ t('auto_publishing') }}</span>
        </label>
        {{ field_label(t('interval_minutes')) }}
        <input type="number" name="publish_interval"
               value="{{ project.schedule.publish_interval_minutes if project and project.schedule else 20 }}"
               class="w-full bg-[#12122a] border border-[#2a2a4a] rounded-lg px-4 py-2 text-[#e0e0e0] text-sm transition-all">
    </div>
</div>

<!-- Content Settings -->
{{ section('sliders', t('content_settings')) }}
<div class="grid grid-cols-3 md:grid-cols-6 gap-3">
    {% set cs = project.content_settings if project and project.content_settings else {} %}
    {% for fname, label, default in [
        ('number_of_content', t('num_articles'), 100),
        ('number_of_keyword', t('num_keywords'), 20),
        ('number_of_ads', t('num_ads'), 50),
        ('article_word_count', t('word_count'), 3500),
        ('article_chapters', t('chapters'), 10),
        ('ads_word_count', t('ads_words'), 800)
    ] %}
    <div>
        {{ field_label(label) }}
        <input type="number" name="{{ fname }}" value="{{ cs[fname] if cs and cs[fname] else default }}"
               class="w-full bg-[#1a1a35] border border-[#2a2a4a] rounded-lg px-4 py-2.5 text-[#e0e0e0] text-sm transition-all">
    </div>
    {% endfor %}
</div>
